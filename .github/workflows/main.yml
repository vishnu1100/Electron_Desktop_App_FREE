name: Version2

on:
  schedule:
    - cron: '*/20 * * * *' # Runs every 20 minutes
  workflow_dispatch:  # Allows manual execution of the workflow

permissions:
  contents: write

jobs:
  commit:
    runs-on: ubuntu-latest

    steps:
    # Step 1: Check out the repository with credentials persisted
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        persist-credentials: true

    # Step 2: Modify the file
    - name: Modify the file
      run: echo "Commit made on $(date)" >> commit_file.txt

    # Step 3: Configure Git
    - name: Configure Git user
      run: |
        git config --global user.name "Vishnu1100"
        git config --global user.email "vishnusanthoshvr@gmail.com"

    # Step 4: Generate a random commit message
    - name: Set random commit message
      id: get-commit-message
      run: |
        MESSAGES=("Automated commit: It's time for another one!" \
          "Just here to keep the repo warm ðŸ› ï¸" \
          "This commit is brought to you by caffeine â˜•" \
          "Committing changes like a ninja ðŸ±â€ðŸ‘¤" \
          "Did you hear about the commit that got away? Not this one!" \
          "Who needs sleep? ðŸ¤– Commit time!" \
          "Auto-commit, because I can!" \
          "Sneaking in another commit like ðŸ" \
          "A wild commit appeared!" \
          "Guess what? Another commit!" \
          "Hope this one doesn't break everything ðŸ¤ž" \
          "Oops, I did it again ðŸŽµ" \
          "Adding more bugs... I mean features ðŸ›" \
          "It's not a bug, it's an undocumented feature âœ¨" \
          "Refactoring... or just moving stuff around ðŸ¤·" \
          "Hereâ€™s another commit because why not? ðŸ¤ª" \
          "The cake is a lie, but this commit is real ðŸŽ‚" \
          "What does this button do? Oh, a commit!" \
          "Too legit to git (push) âœŠ" \
          "Commit and run... before anyone notices ðŸš€" \
          "Just a little commit to brighten your day ðŸŒž" \
          "Keep calm and commit on ðŸ’¾" \
          "Git pushed like it's hot ðŸ”¥" \
          "Added some magic âœ¨. Abracadabra!" \
          "Code so good, even the rubber duck approves ðŸ¦†" \
          "This commit message is sponsored by procrastination ðŸ›‹ï¸" \
          "One commit closer to quitting time ðŸ•”" \
          "Fixing bugs one commit at a time ðŸž" \
          "Adding commits like a boss ðŸ’¼" \
          "Testing in prod? YOLO ðŸŒŠ" \
          "I swear it worked on my machine ðŸ¤”" \
          "Merge conflicts are just puzzles with attitude ðŸ§©" \
          "Dear future me, Iâ€™m sorry. ðŸ˜…" \
          "Every commit is a step towards MVP... kinda ðŸš¶" \
          "Proof that Iâ€™m doing work, I promise ðŸ“ˆ" \
          "No one asked for this, but here it is anyway ðŸ’" \
          "Git it together! âœ¨" \
          "This code is held together by duct tape ðŸ› ï¸" \
          "Here comes another unnecessary commit ðŸ¢" \
          "Commit. Commit. Profit? ðŸ’°" \
          "Running out of commit jokes... send help ðŸš¨")

        # Select a random message
        RANDOM_INDEX=$((RANDOM % ${#MESSAGES[@]}))
        echo "message=${MESSAGES[$RANDOM_INDEX]}" >> $GITHUB_ENV

    # Step 5: Commit and push changes
    - name: Commit and push changes
      run: |
        git add commit_file.txt
        git commit -m "$message" || echo "No changes to commit"
        git push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
